(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{50:function(e,n,t){},51:function(e,n,t){},84:function(e,n,t){"use strict";t.r(n);var s=t(4),i=t.n(s),a=t(42),c=t.n(a),o=(t(50),t(51),t(17)),d=t(43),r=t.n(d),u=t.p+"static/media/audio.af4a25f6.mp3",l=t(3),m=r.a.connect("https://chat-app-serverside.herokuapp.com/",{"sync disconnect on unload":!0});var b=function(e){Object(s.useEffect)((function(){m.on("setData",(function(e){}))}),[]),window.addEventListener("beforeunload",(function(e){return(e||window.event).returnValue=null,null}));var n=new Audio(u),t=e.user.displayName,i=e.user.photoURL;function a(e){var n=e.getHours(),t=e.getMinutes(),s=n>=12?"pm":"am";return(n=(n%=12)||12)+":"+(t=t<10?"0"+t:t)+" "+s}var c=function(e){var n=document.getElementById("chat-box"),t=document.createElement("div");t.className="sender-bubble-wrapper",t.innerHTML='<div class="sender message-bubble"><div style="font-style:italic;" class="bubble-text">'+e+'</div><div class="bubble-time">'+a(new Date)+"</div></div></div>",n.append(t)},d=Object(s.useState)(!1),r=Object(o.a)(d,2),b=r[0],p=r[1],j=function(){document.getElementById("chat-box").childNodes[document.getElementById("chat-box").childNodes.length-1].scrollIntoView({behaviour:"smooth"})},v=function(e){document.getElementById("online-users").innerHTML=e.length;var n="";e.forEach((function(e){n+="<li>"+e+"</li>"})),document.getElementById("online-users-list").innerHTML=n},g=Object(s.useState)(""),h=Object(o.a)(g,2),O=h[0],y=h[1],x=function(){if(""!==O){var e={name:t,message:O};m.emit("send-message",e),m.emit("typing",{message:"",name:t}),function(e){var n=document.getElementById("chat-box"),t=document.createElement("div");t.className="sender-bubble-wrapper",t.innerHTML='<div class="sender message-bubble"><div class="bubble-name">You</div><div class="bubble-text">'+e+'</div><div class="bubble-time">'+a(new Date)+'</div></div><img class="dp" src='+i+' alt="dp">',n.append(t),j(),m.emit("getData")}(O),y(""),document.getElementById("message").focus()}};return Object(s.useEffect)((function(){var e={name:t,picture:i};m.emit("new-user-joined",e),m.on("user-joined",(function(e){c(e.name+" Joined the Chat."),v(Object.keys(e.online))})),m.on("user-left",(function(e){c(e.name+" Left the Chat."),v(Object.keys(e.online))})),m.on("recieve-typing",(function(e){for(var n="",s=0;s<Object.keys(e).length;s+=2)Object.keys(e)[s]!==t&&(n+=Object.keys(e)[s]),Object.keys(e).length-2!==s&&""!==n&&(n+=" + ");""!==n&&(n+=" Typing..."),document.getElementById("typing").innerHTML=n})),m.on("update-online",(function(e){v(Object.keys(e))})),m.on("recieve-message",(function(e){document.getElementById("chat-box").addEventListener("DOMNodeInserted",(function(){})),function(e,t,s){n.play();var i=document.getElementById("chat-box"),c=document.createElement("div");c.className="reciever-bubble-wrapper",c.innerHTML='<img class="dp" src='+s+' alt="dp"><div class="message-bubble">\n        <div class="bubble-name">'+e+'</div>\n        <div class="bubble-text">'+t+'</div>\n        <div class="bubble-time">'+a(new Date)+"</div>\n        </div>",i.append(c),j()}(e.name,e.message,e.picture)}))}),[]),Object(l.jsx)("div",{className:"home-container",children:Object(l.jsxs)("div",{className:"main-chat-container",children:[Object(l.jsxs)("div",{className:"chat-header",children:[Object(l.jsxs)("div",{className:"m-10",children:[Object(l.jsx)("div",{className:"header-text",children:"Realtime Chat Around the World"}),Object(l.jsxs)("div",{id:"online-wrapper",onClick:function(){var e=document.getElementById("online-users-list").style.display;document.getElementById("online-users-list").style.display=""===e?"block":""},children:["(",Object(l.jsx)("i",{className:"fas fa-globe"})," Online"," ",Object(l.jsx)("span",{id:"online-users"}),") ",Object(l.jsx)("ul",{id:"online-users-list"})]})]}),Object(l.jsxs)("div",{className:"m-10",children:[Object(l.jsx)("div",{onClick:function(){return p(!b)},children:b?Object(l.jsx)("i",{className:"fas fa-volume-mute"}):Object(l.jsx)("i",{className:"fas fa-volume-up"})}),Object(l.jsx)(f.SignOut,{})]})]}),Object(l.jsx)("div",{id:"chat-box",className:"chat-box"}),Object(l.jsx)("button",{onClick:function(){return j()},id:"scrollDown",children:Object(l.jsx)("i",{className:"fas fa-arrow-alt-circle-down"})}),Object(l.jsxs)("div",{id:"sending-component",children:[Object(l.jsx)("div",{id:"typing"}),Object(l.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},id:"send-message-wrapper",className:"send-message-wrapper",children:[Object(l.jsx)("input",{type:"text",autoComplete:"off",onKeyUp:function(e){},name:"message",id:"message",onChange:function(e){return function(e){y(e),m.emit("typing",{message:e,name:t})}(e.target.value)},value:O,placeholder:"Enter Your Message"}),Object(l.jsx)("button",{id:"message-send-button",onClick:function(){return x()},children:"Send"})]})]})]})})},p={apiKey:"AIzaSyCyB2Or8Dxmwd8m_iptGEFcqN579BN1dzk",authDomain:"message-app-b2d31.firebaseapp.com",projectId:"message-app-b2d31",storageBucket:"message-app-b2d31.appspot.com",messagingSenderId:"939057848458",appId:"1:939057848458:web:9efb13d3cf5d74bd9d4d73",measurementId:"G-B21M3PZ13F"},j=t(21),v=(t(85),t(82),t(86),t(45));j.a.initializeApp(p);var g=j.a.auth();var f={Login:function(){var e,n=Object(v.a)(g),t=Object(o.a)(n,1)[0];try{t.displayName&&(e=t)}catch(s){}return e?Object(l.jsx)(b,{user:e}):Object(l.jsx)("button",{id:"login",onClick:function(){var e=new j.a.auth.GoogleAuthProvider;g.signInWithPopup(e)},children:"Login"})},SignOut:function(){return g.currentUser&&Object(l.jsx)("button",{id:"signout",onClick:function(){return g.signOut()},children:"Sign Out"})}};var h=function(){var e=.01*window.innerHeight;return document.documentElement.style.setProperty("--vh","".concat(e,"px")),Object(l.jsx)(f.Login,{})},O=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,87)).then((function(n){var t=n.getCLS,s=n.getFID,i=n.getFCP,a=n.getLCP,c=n.getTTFB;t(e),s(e),i(e),a(e),c(e)}))};c.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(h,{})}),document.getElementById("root")),O()}},[[84,1,2]]]);
//# sourceMappingURL=main.5f77f0e8.chunk.js.map